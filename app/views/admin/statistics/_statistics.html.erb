<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.4.3.min.css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
  <script src="http://cdn.oesmith.co.uk/morris-0.4.3.min.js"></script>

  <script type='text/javascript'>//<![CDATA[
  var m_timer = null;


  </script>
</head>
<body>
<div class="wrapper-padding">

  <div class="wrapper">
    <article>

      <ul id="myTab" class="nav nav-tabs">
        <li class="active"><a href="#titles" data-toggle="tab">Intereses</a></li>
        <li><a href="#registrations" data-toggle="tab">Registraciones</a></li>
        <li><a href="#publish" data-toggle="tab">Publicaci√≥n de ofertas</a></li>
      </ul>

      <div id="myTabContent" class="tab-content">

        <div class="tab-pane active clearfix" id="titles">

          Intereses por clientes:
          <div id="titlesChart" style="height: 310px;"></div>

          Intereses por oferta:
          <div id="titlesOfferChart" style="height: 310px;"></div>

        </div><!--end myTabContent-->

        <div class="tab-pane active clearfix" id="registrations">

          Clientes registrados por mes:
          <div id="clientsChart" style="height: 310px;"></div>

          Empresas registradas por mes:
          <div id="companyChart" style="height: 310px;"></div>

        </div><!--end myTabContent-->

        <div class="tab-pane active clearfix" id="publish">

          Ofertas publicadas por mes:
          <div id="offerChart" style="height: 310px;"></div>

        </div><!--end myTabContent-->

      </div>



    </article>

  </div>
  <!--end wrapper-->
</div>


</body>
</html>
<script>

new Morris.Donut({
    element: 'titlesChart',
    data: [
        <% Title.all.each do |t| %>
        {label: "<%=t.name%>", value: <%= t.num_clients %>},
        <% end %>
    ],
    colors: [
        '#FF0000',
        '#FF8000',
        '#FFFF00',
        '#80FF00',
        '#006600',
        '#00FF80',
        '#00CCCC',
        '#0000FF',
        '#000066',
        '#4C0099',
        '#FF00FF',
        '#FF99CC'
    ]
});

new Morris.Donut({
    element: 'titlesOfferChart',
    data: [
        <% Title.all.each do |t| %>
        {label: "<%=t.name%>", value: <%= t.num_offers %>},
        <% end %>
    ],
    colors: [
        '#FF0000',
        '#FF8000',
        '#FFFF00',
        '#80FF00',
        '#006600',
        '#00FF80',
        '#00CCCC',
        '#0000FF',
        '#000066',
        '#4C0099',
        '#FF00FF',
        '#FF99CC'
    ]
});

new Morris.Bar({
    element: 'clientsChart',
    data: [
        <% Statistics.client_registrations.each do |a| %>
            { y: '<%= a[0] %>', a: <%= a[1] %> },
        <% end %>
    ],
    xkey: 'y',
    ykeys: ['a'],
    labels: ['Clientes Registrados'],
    colors: [
        '#0000FF'
    ]
});

new Morris.Bar({
    element: 'companyChart',
    data: [
        <% Statistics.company_registrations.each do |a| %>
        { y: '<%= a[0] %>', a: <%= a[1] %> },
        <% end %>
    ],
    xkey: 'y',
    ykeys: ['a'],
    labels: ['Empresas Registradas']
});

new Morris.Bar({
    element: 'offerChart',
    data: [
        <% Statistics.offers_per_month.each do |a| %>
        { y: '<%= a[0] %>', a: <%= a[1] %> },
        <% end %>
    ],
    xkey: 'y',
    ykeys: ['a'],
    labels: ['Ofertas publicadas']
});


</script>